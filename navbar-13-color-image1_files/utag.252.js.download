//tealium universal tag - utag.252 ut4.0.202509191407, Copyright 2025 Tealium.com Inc. All Rights Reserved.
window.adroll_pix_id="";try{(function(id,loader){var u={id:id};utag.o[loader].sender[id]=u;u.ev={view:1,link:1};u.initialized=false;u.scriptrequested=false;u.EVENTS_LIST={productView:'productView',homeView:'homeView',productSearch:'productSearch',addToCart:'addToCart',purchase:'purchase',pageView:'pageView'};u.prepareProductsArray=function(tagData){return tagData.product_id.map(function(id,index){return u.clearEmptyKeys({product_id:tagData.product_id[index],product_group:tagData.product_group[index],quantity:tagData.quantity[index],price:tagData.price[index],category:tagData.category[index]});});};u.toBoolean=function(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.clearEmptyKeys=function(object){Object.keys(object).forEach(function(key){if(object[key]===''||object[key]===undefined){delete object[key];}});return object;};u.mapFunc=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.mapFunc(arr,obj[i],item);}else{obj[i]=item;}};u.loaderCallback=function(){utag.DB('send:252:CALLBACK');u.initialized=true;adroll.track("pageView");u.callback();utag.DB('send:252:CALLBACK:COMPLETE');};u.callback=function(){u.data.events.forEach(function(eventName){u.sendEvent(eventName);});};u.sendEvent=function(eventName){var eventData={};switch(eventName){case u.EVENTS_LIST.productView:{eventData=u.clearEmptyKeys({products:u.prepareProductsArray(u.data)});break;}
case u.EVENTS_LIST.homeView:{eventData=u.clearEmptyKeys({site_type:u.data.site_type});break;}
case u.EVENTS_LIST.productSearch:{eventData=u.clearEmptyKeys({keywords:u.data.keywords,products:u.prepareProductsArray(u.data)});break;}
case u.EVENTS_LIST.addToCart:{eventData=u.clearEmptyKeys({currency:u.data.currency,products:u.prepareProductsArray(u.data)});break;}
case u.EVENTS_LIST.purchase:{eventData=u.clearEmptyKeys({order_id:u.data.order_id,currency:u.data.currency,conversion_value:u.data.conversion_value,products:u.prepareProductsArray(u.data)});break;}
case u.EVENTS_LIST.pageView:{eventData=u.clearEmptyKeys({currency:u.data.currency,total:u.data.total,cartValue:u.data.cartValue,products:u.prepareProductsArray(u.data)});break;}
default:{}}
utag.ut.merge(eventData,u.data[eventName],1);adroll.track(eventName,eventData);};u.map={"cp.urbn_currency":"currency"};u.extend=[function(a,b){try{if(1){if(a==='view'&&b.page_type==='receipt'&&b.order_id&&b.order_subtotal&&window.adroll){const order_id=b.order_id||window.urbn.vendor.order_id;const conversion_value=b.order_subtotal||window.urbn.vendor.order_subtotal;adroll.track("pageView",{segment_name:"9832551b",order_id:order_id,conversion_value:conversion_value,currency:"USD"});}}}catch(e){utag.DB(e)}}];u.send=function(utag_event,data_layer){if(!u.ev[utag_event]&&u.ev.all===undefined){utag.DB('send:252:EVENT NOT SUPPORTED:COMPLETE');return;}
utag.DB('send:252');utag.DB(data_layer);var a,b,c,d,e,f,g,h;a=utag_event;b=data_layer;u.data={adroll_adv_id:"QWC5THA5TZFOLOWWLOOPBD",adroll_pix_id:"TLGS2MDMOFEALNQLHLTLBW",base_url:'https://s.adroll.com/j/##utag_adroll_adv_id##/roundtrip.js',total:'',cartValue:'',product_group:'product_group',site_type:'',keywords:'',conversion_value:'',currency:'',order_id:'',product_id:'',category:'',quantity:'',price:'',custom:{},events:[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB('send:252:EXTENSIONS');utag.DB(data_layer);Object.keys(utag.loader.GV(u.map)).forEach(function(mapping_key){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==''){var destinations=u.map[mapping_key].split(',');destinations.forEach(function(parameter){u.mapFunc(parameter.split('.'),u.data,data_layer[mapping_key]);});}else{var event_destinations=mapping_key.split(':');if(event_destinations.length===2&&String(data_layer[event_destinations[0]])===String(event_destinations[1])){if(u.map[mapping_key]){u.data.events=u.data.events.concat(u.map[mapping_key].split(','));}}}});utag.DB('send:252:MAPPINGS');utag.DB(u.data);var eCommerceMapping=[{eCommerceData:data_layer._corder,name:'order_id',isArray:false},{eCommerceData:data_layer._csubtotal,name:'conversion_value',isArray:false},{eCommerceData:data_layer._ccurrency,name:'currency',isArray:false},{eCommerceData:data_layer._cprod,name:'product_id',isArray:true},{eCommerceData:data_layer._ccat,name:'category',isArray:true},{eCommerceData:data_layer._cquan,name:'quantity',isArray:true},{eCommerceData:data_layer._cprice,name:'price',isArray:true}];eCommerceMapping.forEach(function(dataObject){if(!dataObject.isArray){u.data[dataObject.name]=u.data[dataObject.name]||dataObject.eCommerceData||'';}else if(u.data[dataObject.name].length===0&&dataObject.eCommerceData!==undefined&&dataObject.isArray){u.data[dataObject.name]=dataObject.eCommerceData.slice(0);}});if(!u.data.adroll_adv_id){utag.DB(u.id+": Tag not fired: Required attribute 'adroll_adv_id' not populated");return;}
u.data.base_url=u.data.base_url.replace('##utag_adroll_adv_id##',u.data.adroll_adv_id);if(u.initialized){u.callback();}else{if(!u.scriptrequested){u.scriptrequested=true;window.adroll_adv_id=u.data.adroll_adv_id;window.adroll_pix_id=u.data.adroll_pix_id;window.adroll_version="2.0";(function(w,d,e,o,a){w.__adroll_loaded=true;w.adroll=w.adroll||[];w.adroll.f=['setProperties','identify','track'];for(a=0;a<w.adroll.f.length;a++){w.adroll[w.adroll.f[a]]=w.adroll[w.adroll.f[a]]||(function(n){return function(){w.adroll.push([n,arguments])}})(w.adroll.f[a])};})(window,document);utag.ut.loader({type:'script',src:u.data.base_url,cb:u.loaderCallback,loc:'script',id:'utag_252',attrs:{}});}}
utag.DB('send:252:COMPLETE');};utag.o[loader].loader.LOAD(id);}('252','urbanoutfitters.a15-uoweb'));}catch(error){utag.DB(error);}
